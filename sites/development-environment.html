<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="User Manual" href="manual.html" /><link rel="prev" title="Welcome to MDS Desktop’s documentation!" href="../index.html" />

    <meta name="generator" content="sphinx-4.5.0, furo 2022.09.29"/>
        <title>Development - MDS Desktop documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=d81277517bee4d6b0349d71bb2661d4890b5617c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">MDS Desktop  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">MDS Desktop  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual.html">User Manual</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="development">
<h1>Development<a class="headerlink" href="#development" title="Permalink to this headline">#</a></h1>
<p>This chapter concerns documentation related to the development of the MDS-Desktop app not the use of it by endusers.</p>
<section id="development-environment">
<h2>Development Environment<a class="headerlink" href="#development-environment" title="Permalink to this headline">#</a></h2>
<p>This chapter provides instructions on how to setup the recommended development environment for the MDS-Desktop project.
The MDS-Desktop app is built, on top of <a class="reference external" href="https://github.com/cawa-93/vite-electron-builder">vite-electron-builder</a> as an <a class="reference external" href="https://www.electronjs.org/">Electron</a> application which uses <a class="reference external" href="https://vuejs.org/">Vue.js</a> to render the ui and <a class="reference external" href="https://vitejs.dev/">Vite</a> to build the vue.js application.
As an Electron app this application is built on top of <a class="reference external" href="https://nodejs.org/en/">Node.js</a> and uses the <a class="reference external" href="https://www.npmjs.com/">npm</a> package manager for dependency management and the build process.</p>
<section id="setup-development-environment">
<h3>Setup Development Environment<a class="headerlink" href="#setup-development-environment" title="Permalink to this headline">#</a></h3>
<p>First you need to setup Node.js and npm if you haven’t already.
To install both download and execute the <a class="reference external" href="https://nodejs.org/en/download/">Node.js Installer</a> or use a <a class="reference external" href="https://nodejs.org/en/download/package-manager/">package manager</a> for the installation, if available.</p>
<p>Next if you just want to run the MDS-Desktop app you can clone the regular repository using:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/mobile-directing-system/mds-desktop.git
</pre></div>
</div>
<p>If you want to contribute however, you need to create a fork of the regular repository and clone the fork instead.
Finish setting up the app by changing into the root directory of the repository and run <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">i</span></code>.
To run the app in dev mode with HMR for most parts of the app run <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">watch</span></code>.
Lasty to run the app in productiion mode with the statically compiled vue ui run <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">prod</span></code>.</p>
<p>You can use any Editor you like to work with the app but we strongly recommend <a class="reference external" href="https://code.visualstudio.com/">VSCode</a>.
This editor enable comfortable development by providing a number of extensions that help with the developement.
Recommended extensions for working on the app are <em>npm Intellisense</em>, <em>Vue Language Features</em>, <em>ESLint</em> and <em>Tailwind CSS IntelliSense</em>.</p>
</section>
</section>
<section id="technolgies-architecture">
<h2>Technolgies &amp; Architecture<a class="headerlink" href="#technolgies-architecture" title="Permalink to this headline">#</a></h2>
<p>This chapter covers used technologies, theirs docs, if necessary how they are used and the architecture of the MDS-Desktop app.</p>
<section id="technologies">
<h3>Technologies<a class="headerlink" href="#technologies" title="Permalink to this headline">#</a></h3>
<p>For this <a class="reference external" href="https://www.electronjs.org/">Electron</a> app we use <a class="reference external" href="https://vuejs.org/">Vue.js</a> as the web framework with <a class="reference external" href="https://tailwindcss.com/">tailwindcss</a> and <a class="reference external" href="https://flowbite.com/">Flowbite</a> as the UI framework and the logic is writtin in Typescript.
For routing we use <a class="reference external" href="https://router.vuejs.org/">vue-router</a>.
For state management of the UI we use <a class="reference external" href="https://vuex.vuejs.org/">vuex</a> with the <a class="reference external" href="https://www.npmjs.com/package/vuex-smart-module">vuex-smart-module</a> to have TypeScript support.
We use <a class="reference external" href="https://lodash.com/">Lodash</a> as a utitlity library in the frontend.
The vue app the UI uses <a class="reference external" href="https://vitejs.dev/">Vite</a> for building and bundling.
The HTTP communication with the backend is implemented using <a class="reference external" href="https://axios-http.com/">Axios</a> and the Weboscket communication with <a class="reference external" href="https://github.com/websockets/ws">ws</a>.
The UI tests are done with <a class="reference external" href="https://playwright.dev/">Playwright</a> and <a class="reference external" href="https://vitest.dev/">Vitest</a>.</p>
</section>
<section id="architecture">
<h3>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">#</a></h3>
<a class="reference internal image-reference" href="../_images/mds-desktop-architecture.svg"><img alt="MDS-Desktop Architecture Diagram" src="../_images/mds-desktop-architecture.svg" width="600" /></a>
<p>As an Electron app the MDS-Desktop app is split into three parts.
The first is the Website which defines the UI, for which we use a web app developed in vue.
The second is the Preload Module which defines what Node.js functionality is usable from the web app.
Here we use is mainly to expose wrapper functions around the IPC calls to the Node.js part of the app.
Lastly there is the Node.js part. This part starts &amp; configures the browser windows to display the web app and implements other functionality not available to JS in the browser such as access to the files on the computer.</p>
<p>The Vue UI app is split between the router, views, components and the vuex state.
The app is structured by using the router to route between different views.
These views themselves are made up of components, HTML and Typescript.
Those components them are made up similary to the view, but in contrast to the views they are supposed to be usable at multiple points in the application.
We decide on which functionality to put into a component based on if it is going to be reused or not.
The data which is displayed by the UI is taken from vuex which we use to manage the state of our app.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Both views and components are written in the <em>SFC</em> format using Vue3 with the Composition API. We also use Typescript and the <cite>&lt;script setup&gt;</cite> tag for our code. When ever possible try to use those technolgies and make sure that when browsing the <a class="reference external" href="https://vuejs.org/guide/introduction.html">Vue.js Documentation</a> you have the toggle at the top of the sidebar set to Composition API.</p>
</div>
<p>To get started with Vue.js take a look at the <a class="reference external" href="https://vuejs.org/guide/introduction.html">Vue.js Documentation</a>.
For an introduction to the vue-router visit the <a class="reference external" href="https://router.vuejs.org/guide/">vue-router Guide</a>.
To get a general understanding of vuex you can orient yourself at the <a class="reference external" href="https://vuex.vuejs.org/guide/">vuex Guide</a>.
But we use the vuex-smart-module to gain TypeScript support for vuex and used the README in the <a class="reference external" href="https://github.com/ktsn/vuex-smart-module">vuex-smart-module Github</a> orient ourself when writing our vuex module.</p>
<p>The Preload Module is mostly autmated and only conists of wrapper functions to expose the IPC calls to the vue app.
But here it is <strong>Important</strong> to note that the auto-export plugin currently is bugged and needs all of the functions you want to export to be on a seperate line and in a seperate export statement.
If this is not done the vue app will not be able to find the preload module.</p>
<p>We use the Node.js part mostly to implement the skaffolding of the app (e.g. start browser window with the web app and hide window bar, implement exit window function, etc.) and the IPC, Handler and client-side implementation of the MDS-Server HTTP API.
To Familiarize youself with Electron you can use the <a class="reference external" href="https://www.electronjs.org/docs/latest">Electron Introduction</a>.</p>
</section>
<section id="directory-structure-of-the-project">
<h3>Directory Structure of the Project<a class="headerlink" href="#directory-structure-of-the-project" title="Permalink to this headline">#</a></h3>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>docs/                       <span class="c1"># All the documentation, both vuepress and sphinx</span>
Makefile                    <span class="c1"># Makefile to build the sphinx documentation (run make in</span>
                            <span class="c1"># project root)</span>
node_modules                <span class="c1"># Contains the downloaded node packages/modules (don&#39;t touch)</span>
package.json                <span class="c1"># Conatins node.js configuration, e.g. entry point into the app,</span>
                            <span class="c1"># dependecies, scripts (what can be run with npm run [command])</span>
packages/                   <span class="c1"># Contains the source code of the app and configuration specific</span>
                            <span class="c1"># to the different parts of the app</span>
postcss.config.js           <span class="c1"># Part of the TailwindCSS configuration. Concerns only the</span>
                            <span class="c1"># renderer part of the app. Is here for build compatibility</span>
                            <span class="c1"># purposes with the production build. Must be the same as the</span>
                            <span class="c1"># packages/renderer/postcss.config.js file</span>
README.md                   <span class="c1"># Main README of the project. Mostly points to the sphinx</span>
                            <span class="c1"># documentation</span>
scripts/                    <span class="c1"># contains mostly watch.js to support HMR with vite and electron</span>
tailwind.config.js          <span class="c1"># Main TailwindCSS configuration. Concerns only the renderer</span>
                            <span class="c1"># part of the app. Is here for build compatibility purposes</span>
                            <span class="c1"># with the production build. Must be the same as the</span>
                            <span class="c1"># packages/renderer/tailwind.config.js file</span>
testDataGenerators          <span class="c1"># directory with the bash scripts for generating the test data</span>
                            <span class="c1"># for the mocked backend</span>
tests/                      <span class="c1"># Contains E2E tests</span>
vitest.config.js            <span class="c1"># Configuration for the vitest testing framework</span>
docs/make.bat               <span class="c1"># Build the sphinx documentation on windows (run make.bat)</span>
docs/images                 <span class="c1"># Contains the images used in the sphinx documentation</span>
docs/index.rst              <span class="c1"># Entry point into the sphinx documentation (toctree)</span>
docs/conf.py                <span class="c1"># Configuration for the sphinx documentation contains</span>
                            <span class="c1"># the definition of external links among other things</span>
docs/sites                  <span class="c1"># Contains the chapters of the sphinx documentation</span>
docs/_build                 <span class="c1"># Contains the built sphinx documentation in HTML files</span>
docs/README.md              <span class="c1"># Entry point into the vupress documentation</span>
docs/.vuepress              <span class="c1"># Contains configuration and build products of the vuepress</span>
                            <span class="c1"># documentation</span>
docs/component-docs         <span class="c1"># Vuepress markdown documentation files</span>
docs/.vuepress/config.ts    <span class="c1"># Configuration of vuepress (mainly instruct vuepress to use</span>
                            <span class="c1"># vite as the bundler)</span>
packages/main/              <span class="c1"># All code and configs specific to the main node.js part of</span>
                            <span class="c1"># the electron app</span>
packages/preload/           <span class="c1"># All code and configs specific to the preload module (mostly</span>
                            <span class="c1"># wrappers and auto-generated)</span>
packages/renderer/          <span class="c1"># All code and configs specific to the renderer part (UI) of</span>
                            <span class="c1"># the electron app</span>
packages/types/             <span class="c1"># Contains the types for entities (e.g. Users, Groups, etc.)</span>
                            <span class="c1"># Used in all three parts of the app</span>
packages/*/vite.config.js   <span class="c1"># Configuration for Vite for all three different parts</span>
packages/*/tsconfig.json    <span class="c1"># Configuration for the Typescript compiler for all three</span>
                            <span class="c1"># different parts</span>
packages/*/src/             <span class="c1"># Source code for the three different parts</span>
packages/*/dist/            <span class="c1"># Build products for the three different parts</span>
packages/main/src/backend       <span class="c1"># Code for the communication with the MDS-Server HTTP</span>
                                <span class="c1"># API including e.g. the caching of the Auth Cookie</span>
packages/main/src/config        <span class="c1"># Rudimentary config file</span>
packages/main/src/index.ts      <span class="c1"># Main entry point into the whole app. Starts the Windows,</span>
                                <span class="c1"># registers the ipc handlers, etc.</span>
packages/main/src/ipcHandlers   <span class="c1"># Implementation of ipcHandler wrappers for the backend</span>
                                <span class="c1"># comms functions</span>
packages/main/src/windows       <span class="c1"># Contains the code for the different windows</span>
packages/renderer/index.css             <span class="c1"># Main CSS for the whole UI</span>
packages/renderer/index.html            <span class="c1"># Main Page for the SPA UI vue app</span>
packages/renderer/postcss.config.js     <span class="c1"># See postcss.config.js above</span>
packages/renderer/tailwind.config.js    <span class="c1"># See tailwind.config.js above</span>
packages/renderer/src/App.vue           <span class="c1"># Main Vue file.</span>
packages/renderer/components/           <span class="c1"># Contains resuable vue components</span>
packages/renderer/constants/            <span class="c1"># Contains constants such as permissions strings</span>
packages/renderer/src/index.ts          <span class="c1"># Main logic entry point into the vue app.</span>
                                        <span class="c1"># Starts the whole vue app.</span>
packages/renderer/src/router/           <span class="c1"># Contains the definition and configuration of</span>
                                        <span class="c1"># the vue-router</span>
packages/renderer/src/store/            <span class="c1"># Contains all the code related to the</span>
                                        <span class="c1"># implementation and configuration of the</span>
                                        <span class="c1"># vuex store &amp; vuex modules</span>
packages/renderer/src/views/            <span class="c1"># contains the pages routed through with the</span>
                                        <span class="c1"># router</span>
</pre></div>
</div>
</section>
<section id="websocket-connection">
<h3>Websocket Connection<a class="headerlink" href="#websocket-connection" title="Permalink to this headline">#</a></h3>
<p>The Websocket connection uses baseURL from the config plus <code class="docutils literal notranslate"><span class="pre">/ws/desktop-app</span></code> to connect to the backend.
The incoming messages are handled in the <code class="docutils literal notranslate"><span class="pre">.on('message',</span> <span class="pre">async</span> <span class="pre">(e)</span> <span class="pre">=&gt;</span> <span class="pre">{...});</span></code> callback.
When new channels and payload types are added these need to be handled in this callback.
At the end such handling should call an ipcHandler which uses the <code class="docutils literal notranslate"><span class="pre">BrowserWindow.webContents.send()</span></code> method to communicate with the vue-app using ipc.
The Prelude package should then export a function that takes a callback and registers it using <code class="docutils literal notranslate"><span class="pre">ipcRenderer.on();</span></code> for the correct event.
This exported function can then be used to e.g. pass a callback from a state constructor that calls action on the state itself to register new objects, invalidate or delete old ones, etc.</p>
</section>
<section id="mocked-backend">
<h3>Mocked Backend<a class="headerlink" href="#mocked-backend" title="Permalink to this headline">#</a></h3>
<p>To be able to UI test the app without a running server we need a mocked backend implementation.
This is achieved by having conditional exports in <code class="docutils literal notranslate"><span class="pre">packages/main/src/backend/index.ts</span></code>.
When the mockedBackend flag is set in the config the mocked version of tge backend communication functions are exported if not the real ones are exported.
If no mocked function exists for a backend communication function, then the real one is exported regardless of if the flag is set or not.
To work correctly both the mocked and real function have the same signature.</p>
<p>For implementing the mocked backend we used maps and arrays to hold default hardcoded data and store dynamic data which is passed to the mockedBackend during the operation of the app with the mockedBackend flag set.
When implementing new mocket backend parts orient yourself at the MDS-Server documentation which describes how the functions should behave in case of errors or wrong data etc.
For generating the default data data generator bash scripts are available in the <code class="docutils literal notranslate"><span class="pre">testDataGenerators</span></code> directory.</p>
</section>
<section id="ui-testing">
<h3>UI Testing<a class="headerlink" href="#ui-testing" title="Permalink to this headline">#</a></h3>
<p>For UI-Testing we use <a class="reference external" href="https://vitest.dev/">Vitest</a> to write the tests themselves and execute the tests.
playwright:<cite>Playwright &lt;&gt;</cite> is used for instrumentation of the Electron App, so that the tests can start and interact with the electron application.
To familiarize yourself with Playwright and Vitest we suggest you take a look at the <a class="reference external" href="https://playwright.dev/docs/intro">Playwright Docs</a> and <a class="reference external" href="https://playwright.dev/docs/api/class-playwright">Playwright API</a>, as well as the <a class="reference external" href="https://vitest.dev/guide/">Vitest Docs</a> and <a class="reference external" href="https://vitest.dev/api/">Vitest API</a>.</p>
<p>For writing tests orient yourself at the existing UI-Tests.
To write a new UI-Tests you need to first get the first window of the electron app, so the login window.
So you need to login first.
Then write your navigation &amp; test code.
Lastly finish by logging out.
It is nice if this is explicitly done, but if you don’t do it it will be done regardless after every test if the state is still logged in.</p>
<p>All the UI-Tests are defined in <cite>tests/e2e.spec.ts</cite>. This is done as we need the tests to be executed consecutively as they need the GUI and the GUI can only be started once.
It is currently not possible to start two instances of the app and Vitest runs different <code class="docutils literal notranslate"><span class="pre">.spec.ts</span></code> files concurrently.</p>
</section>
<section id="minimal-implementation-for-new-service">
<h3>Minimal Implementation for new Service<a class="headerlink" href="#minimal-implementation-for-new-service" title="Permalink to this headline">#</a></h3>
<p>To implement a minimal service for a new entity (e.g. User, Group, etc.) do the following:</p>
<ol class="arabic">
<li><p>Start with implementing the calls to the backend API using Axios in <em>main/src/backend</em>. Once implemented export them in the <em>main/src/backend/index.ts</em> file.</p></li>
<li><p>Use them to write a handler-wrapper in <em>main/src/ipcHandlers</em>. Export these handlers in the <em>main/src/ipcHandlers/index.ts</em>.</p></li>
<li><p>Register these handlers in ipcMain in <em>main/src/index.ts</em> and give them speaking names.</p></li>
<li><p>Write a wrapper functions for calling those ipcHandlers in <em>preload/src</em> and export them in <em>preload/src/index.ts</em>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure that the names used for calling the ipcHandlers are <strong>exactly</strong> the same as the ones given to them when registering them. <strong>Important</strong> There is a bug with the auto-export plugin that requires you to export each wrapper function sperately on a new line. If this is not done the vue code can’t find the preload module.</p>
</div>
</li>
<li><p>Lastly implement a seperate vuex module to manage the state of the retrieved entities. Use the preload wrapper functions to fetch data from the backend.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When writing a new vuex module and utilizing the IPC wrapper exposed by the preload module it is necessary to <em>undom</em> the objects of the vuex state before they are passed to the wrapper function. If not electron will throw an error complaining that it cannot serialize the object. With <em>undom</em> we mean that you must create a deep copy of the object, so that only basic data types such as number, booleans and strings are copied. Also only fields specified in the type of the object must be copied, but not additional fields created at runtime. This means that if an object holds a reference to another object or array those must be deep copied as well.</p>
</div>
</li>
</ol>
</section>
</section>
<section id="component-documentation">
<h2>Component Documentation<a class="headerlink" href="#component-documentation" title="Permalink to this headline">#</a></h2>
<p>Documentation for the components themselves (in <em>packages/renderer/src/components</em>) can be found either as code comments in the components themselves or in the form of a <a class="reference external" href="https://vuepress.vuejs.org/">VuePress</a> documentation.
The vuepress documentation is written in markdown files in <em>docs/README.md</em> and <em>docs/component-docs/*</em>. To serve the documentation use the</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>npm run docs:dev
</pre></div>
</div>
<p>command in the project root. If you want a statically built HTML version run</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>npm run docs:build
</pre></div>
</div>
<p>in the project root.</p>
<p>The vue components are documented with a general description of their use and particularities, as well as a list of their slots, events and props.</p>
</section>
<section id="ui-customization">
<h2>UI-Customization<a class="headerlink" href="#ui-customization" title="Permalink to this headline">#</a></h2>
<p>As for customization of the standard TailwindCSS, we chose to only adapt the colors.</p>
<section id="custom-colors">
<h3>Custom Colors<a class="headerlink" href="#custom-colors" title="Permalink to this headline">#</a></h3>
<p>For the implementation of our custom color theme we oriented ourselves at <a class="reference external" href="https://tailwindcss.com/docs/customizing-colors">TailwindCSS Customizing Colors</a>.
As such the color definitions can be found in the either of the <em>tailwind.config.js</em> files.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you want to change of extend the custom color theme please be aware that <strong>both</strong> <em>tailwind.config.js</em> files need to be changes for the changes to be reflected in the dev and production modes.</p>
</div>
<p>We chose to implement 6 different colors:</p>
<ul class="simple">
<li><p>primary: The primary color for e.g. normal buttons or other primary UI elements</p></li>
<li><p>secondary: The secondary color for e.g. highlights etc or other secondary UI elements</p></li>
<li><p>warning: The warning color for things the user should perceive more than the standard UI, but is not an error</p></li>
<li><p>error: The error color displayed when e.g. an error occurs or form fields are not filled correctly</p></li>
<li><p>surface: The color for e.g. form fields to be more recognizable on the background or for delimiter</p></li>
<li><p>background: The color for the background</p></li>
</ul>
<p>Each of those colors as five different hues, except the background color:</p>
<ul class="simple">
<li><p>superlight</p></li>
<li><p>light</p></li>
<li><p>-</p></li>
<li><p>dark</p></li>
<li><p>superdark</p></li>
</ul>
<p>Those must can be combinied with the colors using an <em>_</em> to choose a color, e.g. <em>primary_superlight</em> is the superlight hue of the primary color.
If no hue is provides the normal middleground color is chosen.
The combinations themselves are taken from the default TailwindCSS color palatte, so they are a subset of this palatte.</p>
<p>Each of these color and hue combinations also has a <em>on_</em> color for text to be displayed readably on it.
E.g. for text on the background color it would be the color <em>on_background</em> or for text on the primary_superlight color <em>on_primary_superlight</em></p>
<p>These colors can be combined with TailwindCSS designators such as <em>text</em> for text color or <em>bg</em> for background color.
The colors are appended to those designators using a <em>-</em>, so when the primary color is wanted as a background color it is <em>bg-primary</em> with
<em>text-on_primary</em> as the text color for it to be readable.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="manual.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">User Manual</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Home</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Yves Haas, Laurin Todt, Lennart Altenhof
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Development</a><ul>
<li><a class="reference internal" href="#development-environment">Development Environment</a><ul>
<li><a class="reference internal" href="#setup-development-environment">Setup Development Environment</a></li>
</ul>
</li>
<li><a class="reference internal" href="#technolgies-architecture">Technolgies &amp; Architecture</a><ul>
<li><a class="reference internal" href="#technologies">Technologies</a></li>
<li><a class="reference internal" href="#architecture">Architecture</a></li>
<li><a class="reference internal" href="#directory-structure-of-the-project">Directory Structure of the Project</a></li>
<li><a class="reference internal" href="#websocket-connection">Websocket Connection</a></li>
<li><a class="reference internal" href="#mocked-backend">Mocked Backend</a></li>
<li><a class="reference internal" href="#ui-testing">UI Testing</a></li>
<li><a class="reference internal" href="#minimal-implementation-for-new-service">Minimal Implementation for new Service</a></li>
</ul>
</li>
<li><a class="reference internal" href="#component-documentation">Component Documentation</a></li>
<li><a class="reference internal" href="#ui-customization">UI-Customization</a><ul>
<li><a class="reference internal" href="#custom-colors">Custom Colors</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    </body>
</html>